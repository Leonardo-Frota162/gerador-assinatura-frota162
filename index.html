<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Gerador de Assinatura Frota 162</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    body{font-family:'Montserrat',Arial,sans-serif;background:#EFEFEF;display:flex;flex-direction:column;align-items:center;padding:20px;min-height:100vh;}
    #form-container{display:flex;flex-direction:column;align-items:flex-start;width:340px;margin-bottom:20px;background:#fff;padding:15px 20px;border-radius:10px;box-shadow:0 0 8px rgba(0,0,0,.1);}
    label{font-weight:600;color:#2E3233;margin-top:10px;margin-bottom:6px;width:100%;}
    input[type="text"],input[type="url"],input[type="file"]{margin:5px 0;padding:10px;font-size:14px;border-radius:10px;border:1.5px solid #ccc;font-family:'Montserrat',sans-serif;box-sizing:border-box;width:100%;}
    ::placeholder{color:#a9a9a9;font-style:italic;}
    #whatsapp-container{margin-top:6px;display:flex;align-items:center;width:100%;}
    #whatsapp-container label{font-weight:400;color:#284516;cursor:pointer;margin-left:8px;user-select:none;}
    .btn{border:none;cursor:pointer;font-weight:600;transition:background-color .3s ease;margin-top:12px;padding:10px 14px;border-radius:10px;color:#fff;}
    #btnGerar{background:#284516;}
    #btnGerar:hover{background:#1e330f;}
    #btnCopiar{background:#F9401B;display:none;margin-left:10px;}
    #btnCopiar:hover{background:#c33317;}
    #btnEditarFoto{background:#2E3233;}
    #btnEditarFoto:hover{background:#1c1f20;}
    #buttons-container{display:flex;align-items:center;gap:10px;flex-wrap:wrap}

    #assinatura-preview{margin-top:20px;background:#fff;padding:20px;border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,.1);max-width:740px;width:100%;}

    /* ===== Editor de Foto (modal simples) ===== */
    #editor-backdrop{
      position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;z-index:9999;
    }
    #editor-modal{
      width:520px;max-width:90vw;background:#fff;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,.25);padding:16px 16px 12px 16px;
    }
    #editor-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;}
    #editor-title{font-weight:700;color:#2E3233}
    #editor-close{border:none;background:transparent;font-size:24px;cursor:pointer;line-height:1;color:#2E3233}
    #editor-canvas-wrap{position:relative;width:480px;height:320px;max-width:86vw;background:#f4f4f4;border-radius:10px;margin:8px auto;overflow:hidden;border:1px solid #ddd}
    #editor-canvas{display:block;width:100%;height:100%}
    #editor-controls{display:flex;align-items:center;justify-content:space-between;gap:12px;margin:10px 4px 0 4px;flex-wrap:wrap}
    .range{width:200px}
    #editor-help{font-size:12px;color:#555}
    #editor-apply{background:#284516}
    #editor-apply:hover{background:#1e330f}
  </style>
</head>
<body>
  <h2>Gerador de Assinatura Frota 162</h2>

  <div id="form-container">
    <label for="nome">NOME</label>
    <input type="text" id="nome" placeholder="Ex: Marcelo Lemos" />
    <label for="cargo">CARGO</label>
    <input type="text" id="cargo" placeholder="Ex: CEO & Founder" />
    <label for="telefone">TELEFONE</label>
    <input type="text" id="telefone" placeholder="Ex: (11) 99999-9999" />
    <div id="whatsapp-container">
      <input type="checkbox" id="whatsapp" />
      <label for="whatsapp">Selecione se o n√∫mero tamb√©m for WhatsApp</label>
    </div>
    <label for="linkedin">LINKEDIN (aceita https, www, ou s√≥ o handle)</label>
    <input type="url" id="linkedin" placeholder="Ex: linkedin.com/in/seu-usuario ou seu-usuario" />
    <label for="foto">FOTO</label>
    <input type="file" id="foto" accept="image/*" />
    <div id="buttons-container">
      <button id="btnGerar" type="button" class="btn">Gerar assinatura</button>
      <button id="btnEditarFoto" type="button" class="btn" disabled>Editar foto</button>
      <button id="btnCopiar" type="button" class="btn">Copiar (Gmail)</button>
      <button id="btnCopiarHTML" type="button" class="btn" style="background:#63B070; display:none;">Copiar HTML (HubSpot)</button>

    </div>
  </div>

  <div id="assinatura-preview"></div>

  <!-- ===== Modal do Editor de Foto ===== -->
  <div id="editor-backdrop">
    <div id="editor-modal">
      <div id="editor-header">
        <div id="editor-title">Ajustar foto (arraste para posicionar e use o zoom)</div>
        <button id="editor-close" title="Fechar">&times;</button>
      </div>
      <div id="editor-canvas-wrap">
        <canvas id="editor-canvas" width="480" height="320"></canvas>
      </div>
      <div id="editor-controls">
        <div style="display:flex;align-items:center;gap:8px">
          <span>Zoom</span>
          <input type="range" id="zoom" class="range" min="0.5" max="3" step="0.01" value="1">
        </div>
        <div id="editor-help">Dica: arraste a imagem para centralizar dentro do c√≠rculo.</div>
        <button id="editor-apply" class="btn">Aplicar recorte</button>
      </div>
    </div>
  </div>

  <script>
    // ===== Estado global simples =====
    let originalImage = null;        // Image() carregada
    let croppedPhotoData = '';       // DataURL final (c√≠rculo) ap√≥s "Aplicar recorte"
    let editor = {                   // Estado do editor
      canvas: null, ctx: null, img: null,
      scale: 1, minScale: 0.5, maxScale: 3,
      offsetX: 0, offsetY: 0,
      dragging: false, lastX: 0, lastY: 0,
      baseFit: 1,
    };

    // ===== Util: parse LinkedIn robusto =====
    function parseLinkedin(link) {
      if (!link) return { href: '', label: '' };
      // remove espa√ßos internos e bordas
      let raw = String(link).trim().replace(/\s+/g, '');
      // handle puro?
      if (!/linkedin\.com/i.test(raw)) {
        const handle = raw.replace(/^in\//i, '').replace(/^\//, '').replace(/\/.*$/, '');
        if (!handle) return { href: '', label: '' };
        return { href: `https://www.linkedin.com/in/${handle}`, label: handle };
      }
      // sem esquema -> prefixa https
      if (!/^https?:\/\//i.test(raw)) {
        raw = 'https://' + raw.replace(/^\/+/, '');
      }
      let url;
      try { url = new URL(raw); } catch { return { href: '', label: '' }; }
      const pathname = url.pathname.replace(/\/+$/, '');
      const parts = pathname.split('/').filter(Boolean);
      let handle = '';
      if (parts.length >= 2 && ['in','company','school','pub'].includes(parts[0].toLowerCase())) handle = parts[1];
      else if (parts.length) handle = parts[parts.length - 1];
      return { href: url.origin + (pathname || '/'), label: handle || url.host };
    }

    // ===== Editor de foto (pan/zoom com m√°scara circular) =====
    const editorBackdrop = document.getElementById('editor-backdrop');
    const editorCanvas  = document.getElementById('editor-canvas');
    const zoomInput     = document.getElementById('zoom');
    const btnEditarFoto = document.getElementById('btnEditarFoto');
    const btnApply      = document.getElementById('editor-apply');
    const btnClose      = document.getElementById('editor-close');

    function openEditor(img) {
      editor.canvas = editorCanvas;
      editor.ctx = editor.canvas.getContext('2d');
      editor.img = img;

      // Ajuste inicial: imagem "cover" no canvas
      const cw = editor.canvas.width, ch = editor.canvas.height;
      const scaleX = cw / img.width;
      const scaleY = ch / img.height;
      editor.baseFit = Math.max(scaleX, scaleY);
      editor.scale = editor.baseFit;
      zoomInput.value = editor.scale.toFixed(2);
      // centraliza
      editor.offsetX = (cw - img.width * editor.scale) / 2;
      editor.offsetY = (ch - img.height * editor.scale) / 2;

      editorBackdrop.style.display = 'flex';
      drawEditor();
    }

    function closeEditor(){ editorBackdrop.style.display='none'; }

    function drawEditor() {
      const ctx = editor.ctx;
      const cw = editor.canvas.width, ch = editor.canvas.height;
      ctx.clearRect(0,0,cw,ch);

      // desenha imagem com pan+zoom
      ctx.save();
      ctx.imageSmoothingQuality = 'high';
      ctx.drawImage(editor.img, editor.offsetX, editor.offsetY, editor.img.width*editor.scale, editor.img.height*editor.scale);
      ctx.restore();

      // M√°scara circular de preview (s√≥ visual)
      const r = Math.min(cw, ch) * 0.42; // raio do c√≠rculo (ajuste visual)
      const cx = cw/2, cy = ch/2;

      // overlay escuro + "janela" circular
      ctx.save();
      ctx.fillStyle = 'rgba(0,0,0,0.35)';
      ctx.fillRect(0,0,cw,ch);
      ctx.globalCompositeOperation = 'destination-out';
      ctx.beginPath();
      ctx.arc(cx, cy, r, 0, Math.PI*2);
      ctx.fill();
      ctx.restore();

      // borda do c√≠rculo
      ctx.beginPath();
      ctx.arc(cx, cy, r, 0, Math.PI*2);
      ctx.lineWidth = 2;
      ctx.strokeStyle = '#F9401B';
      ctx.stroke();
    }

    // drag
    editorCanvas.addEventListener('mousedown', e => {
      editor.dragging = true;
      editor.lastX = e.offsetX;
      editor.lastY = e.offsetY;
    });
    window.addEventListener('mouseup', ()=> editor.dragging=false);
    editorCanvas.addEventListener('mousemove', e => {
      if(!editor.dragging) return;
      const dx = e.offsetX - editor.lastX;
      const dy = e.offsetY - editor.lastY;
      editor.offsetX += dx;
      editor.offsetY += dy;
      editor.lastX = e.offsetX;
      editor.lastY = e.offsetY;
      drawEditor();
    });
    // zoom
    zoomInput.addEventListener('input', e => {
      const newScale = Math.max(editor.minScale, Math.min(editor.maxScale, parseFloat(e.target.value) || editor.scale));
      // zoom mantendo posi√ß√£o aparente (pivot no centro do canvas)
      const cw = editor.canvas.width, ch = editor.canvas.height;
      const cx = cw/2, cy = ch/2;
      // coordenadas da imagem antes
      const relX = (cx - editor.offsetX) / editor.scale;
      const relY = (cy - editor.offsetY) / editor.scale;
      editor.scale = newScale;
      editor.offsetX = cx - relX * editor.scale;
      editor.offsetY = cy - relY * editor.scale;
      drawEditor();
    });

    // aplica recorte: exporta um PNG circular 128x128
    btnApply.addEventListener('click', () => {
  const size = 128; // tamanho final do avatar circular (deve bater com o usado na assinatura)
  const out = document.createElement('canvas');
  out.width = size; out.height = size;
  const ctx = out.getContext('2d');

  // === Geometria do preview (use EXACTAMENTE os mesmos valores do drawEditor) ===
  const cw = editor.canvas.width;
  const ch = editor.canvas.height;
  const cx = cw / 2;
  const cy = ch / 2;
  const r  = Math.min(cw, ch) * 0.42; // MESMO 0.42 usado no drawEditor()

  // Escala para mapear o disco de di√¢metro 2r -> size
  const k = size / (2 * r);

  // Estado atual do editor (imagem j√° com pan/zoom no preview)
  const S = editor.scale;
  const drawW = editor.img.width  * S;
  const drawH = editor.img.height * S;

  // Queremos que o ponto (cx,cy) do preview caia exatamente no centro do out (size/2,size/2)
  // Deriva√ß√£o: X_out = size/2 + (X_preview - cx) * k
  // Para a imagem, X_preview = editor.offsetX + u*S  ->  offset_out = size/2 + (editor.offsetX - cx) * k
  const outOffsetX = (size / 2) + (editor.offsetX - cx) * k;
  const outOffsetY = (size / 2) + (editor.offsetY - cy) * k;

  ctx.save();
  // Clipa em c√≠rculo
  ctx.beginPath();
  ctx.arc(size/2, size/2, size/2, 0, Math.PI * 2);
  ctx.closePath();
  ctx.clip();

  // Desenha a imagem com a escala composta S*k e offsets calculados
  ctx.imageSmoothingEnabled = true;
  ctx.imageSmoothingQuality = 'high';
  ctx.drawImage(
    editor.img,
    outOffsetX, outOffsetY,
    drawW * k, drawH * k
  );

  ctx.restore();

  // DataURL final (PNG com transpar√™ncia fora do c√≠rculo)
  croppedPhotoData = out.toDataURL('image/png');
  closeEditor();
});


    btnClose.addEventListener('click', closeEditor);
    editorBackdrop.addEventListener('click', (e)=>{ if(e.target===editorBackdrop) closeEditor(); });

    // ===== Helpers =====
    function loadImageFile(file){
      return new Promise((resolve, reject) => {
        const img = new Image();
        const reader = new FileReader();
        reader.onload = e => { img.onload = ()=> resolve(img); img.onerror = reject; img.src = e.target.result; };
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });
    }

// ===== Assinatura =====
function gerarAssinaturaHTML(nome, cargo, telefone, linkedin, isWhatsapp, fotoSrc) {
  const telefoneRaw = telefone ? telefone.replace(/\D/g, '') : '';
  const telLink = isWhatsapp
    ? (telefoneRaw ? `https://wa.me/${telefoneRaw}` : '')
    : (telefoneRaw ? `tel:+55${telefoneRaw}` : '');
  const iconTel = isWhatsapp
    ? 'https://i.imgur.com/gdgc4KI.png'
    : 'https://i.imgur.com/RFj4ysj.png';

  // imagens
  const fotoHTML = fotoSrc || 'https://via.placeholder.com/128x128.png?text=Foto';
  const logoFrota = 'https://i.imgur.com/ZAtbrph.png'; // Frota 162
  const iconInsta  = 'https://i.imgur.com/Xsb9Sng.png';
  const iconFace   = 'https://i.imgur.com/lfysxTa.png';
  const iconLinked = 'https://i.imgur.com/Z51dBPM.png';
  const iconWeb    = 'https://i.imgur.com/Vv3PICw.png';

  // 3 selos (PLACEHOLDER usando o mesmo link do logo da Frota):
  const apoios = [
    'https://i.imgur.com/bMja3vS.jpeg', // Scale Up
    'https://i.imgur.com/1DbXGH3.png',  // ACE
    'https://i.imgur.com/cd3vOMl.png'   // Cubo
  ];

  // LinkedIn normalizado
  const { href: linkedinHref } = parseLinkedin(linkedin);

  return `
<table cellpadding="0" cellspacing="0" border="0" style="font-family:Montserrat,Arial,sans-serif;font-size:14px;color:#2E3233;width:700px;max-width:100%;background:#fff;">
  <tr>
    <td style="padding:18px 14px 10px 18px;width:150px;vertical-align:top;font-size:0;">
      <img src="${fotoHTML}" alt="Foto" style="width:128px;height:128px;border-radius:50%;object-fit:cover;display:block;border:none;outline:none;">
    </td>
    <td style="padding:18px 18px 10px 0;vertical-align:top;">
      <div style="font-weight:700;font-size:22px;line-height:1.2;color:#2E3233;margin:0 0 6px 0;">
        ${nome || 'Nome Sobrenome'}
      </div>

      <!-- Cargo com √≠cone do LinkedIn linkado (s√≥ o √≠cone) -->
      <table cellpadding="0" cellspacing="0" border="0" style="border-collapse:collapse;margin:0 0 6px 0;">
        <tr>
          <td style="padding:0 8px 0 0;vertical-align:middle;">
            ${linkedinHref
              ? `<a href="${linkedinHref}" target="_blank" rel="noopener noreferrer" style="text-decoration:none;border:none;">
                   <img src="${iconLinked}" alt="LinkedIn" style="height:18px;display:block;border:none;">
                 </a>`
              : `<img src="${iconLinked}" alt="LinkedIn" style="height:18px;display:block;border:none;">`
            }
          </td>
          <td style="padding:0;vertical-align:middle;">
            <span style="font-weight:600;color:#F9401B;">${cargo || 'Cargo'}</span>
          </td>
        </tr>
      </table>

      <!-- Telefone com √≠cone clic√°vel junto -->
      <table cellpadding="0" cellspacing="0" border="0" style="border-collapse:collapse;margin:0;">
        <tr>
          <td style="padding:0;vertical-align:middle;">
            ${telLink
              ? `<a href="${telLink}" style="color:#2E3233;text-decoration:none;display:flex;align-items:center;">
                   <img src="${iconTel}" alt="Telefone" style="height:18px;display:inline-block;margin-right:5px;border:none;">
                   ${telefone || '(11) 99999-9999'}
                 </a>`
              : `<span style="color:#2E3233;display:flex;align-items:center;">
                   <img src="${iconTel}" alt="Telefone" style="height:18px;display:inline-block;margin-right:5px;border:none;">
                   ${telefone || '(11) 99999-9999'}
                 </span>`
            }
          </td>
        </tr>
      </table>

      <!-- √çcones sociais -->
      <table cellpadding="0" cellspacing="0" border="0" style="width:100%;margin:41px 0 0 0;border-collapse:collapse;">
        <tr>
          <td style="text-align:right;vertical-align:middle;white-space:nowrap;">
            <a href="https://www.frota162.com.br" target="_blank" style="display:inline-block;margin-left:12px;">
              <img src="${iconWeb}" alt="Site" style="height:20px;display:block;border:none;">
            </a>
            <a href="https://www.linkedin.com/company/frota-162" target="_blank" style="display:inline-block;margin-left:12px;">
              <img src="${iconLinked}" alt="LinkedIn" style="height:20px;display:block;border:none;">
            </a>
            <a href="https://www.instagram.com/frota162" target="_blank" style="display:inline-block;margin-left:12px;">
              <img src="${iconInsta}" alt="Instagram" style="height:20px;display:block;border:none;">
            </a>
            <a href="https://www.facebook.com/frota162" target="_blank" style="display:inline-block;margin-left:12px;">
              <img src="${iconFace}" alt="Facebook" style="height:20px;display:block;border:none;">
            </a>
          </td>
        </tr>
      </table>
    </td>
  </tr>

  <!-- Barra laranja -->
  <tr>
    <td colspan="2" style="padding:0;">
      <div style="height:6px;background-color:#F9401B;width:100%;"></div>
    </td>
  </tr>

<!-- Linha de logos -->
<tr>
  <td colspan="2" style="padding:12px 18px;">
    <table cellpadding="0" cellspacing="0" border="0" style="width:100%;border-collapse:collapse;">
      <tr>
        <!-- Logo Frota alinhado √† esquerda e clic√°vel -->
        <td style="vertical-align:middle;width:1%;white-space:nowrap;">
          <a href="https://www.frota162.com.br" target="_blank" style="display:inline-block;">
            <img src="${logoFrota}" alt="Frota 162" style="height:24px;display:inline-block;border:none;outline:none;">
          </a>
        </td>

        <!-- Selos centralizados como grupo e clic√°veis -->
        <td style="width:99%;text-align:center;vertical-align:middle;">
          ${apoios.map((src, i) => {
            // links de exemplo: substitua pelos reais
            const links = [
              'https://endeavor.org.br/programa-scale-up/',
              'https://aceventures.com.br/',
              'https://cubo.network/'
            ];
            return `
              <a href="${links[i]}" target="_blank" style="display:inline-block;margin:${i>0?'0 0 0 16px':'0'};">
                <img src="${src}" alt="Selo ${i+1}" style="height:22px;display:inline-block;border:none;outline:none;vertical-align:middle;">
              </a>
            `;
          }).join('')}
        </td>
      </tr>
    </table>
  </td>
</tr>


</table>
  `.trim();
}

    // ===== Fluxo principal =====
    const fileInput = document.getElementById('foto');
    fileInput.addEventListener('change', async () => {
      const f = fileInput.files && fileInput.files[0];
      if (!f) { originalImage=null; btnEditarFoto.disabled = true; return; }
      try {
        originalImage = await loadImageFile(f);
        btnEditarFoto.disabled = false;
        // opcional: j√° abre o editor assim que carrega
        openEditor(originalImage);
      } catch (e) {
        console.warn('Erro ao carregar imagem:', e);
        originalImage = null;
        btnEditarFoto.disabled = true;
      }
    });

    btnEditarFoto.addEventListener('click', ()=>{
      if (originalImage) openEditor(originalImage);
    });

    async function atualizarPreview() {
      const nome = document.getElementById('nome').value.trim();
      const cargo = document.getElementById('cargo').value.trim();
      const telefone = document.getElementById('telefone').value.trim();
      const linkedin = document.getElementById('linkedin').value.trim();
      const isWhatsapp = document.getElementById('whatsapp').checked;

      // Se o usu√°rio j√° aplicou recorte, usamos a imagem recortada;
      // sen√£o, se tem arquivo selecionado mas n√£o recortou, abrimos o editor;
      // se n√£o tem nada, usamos placeholder.
      if (!croppedPhotoData && originalImage && editorBackdrop.style.display !== 'flex') {
        openEditor(originalImage);
        return; // usu√°rio faz o recorte e depois clica gerar de novo
      }

      const fotoSrc = croppedPhotoData || ''; // se vazio, gerarAssinaturaHTML usa placeholder
      const html = gerarAssinaturaHTML(nome, cargo, telefone, linkedin, isWhatsapp, fotoSrc);
      const preview = document.getElementById('assinatura-preview');
      preview.innerHTML = html;
      document.getElementById('btnCopiar').style.display = 'inline-block';
      document.getElementById('btnCopiarHTML').style.display = 'inline-block';
    }

    async function copiarAssinatura() {
      const preview = document.getElementById('assinatura-preview');
      if (!preview.innerHTML.trim()) { alert('Gere a assinatura antes de copiar!'); return; }
      try {
        if (navigator.clipboard && window.ClipboardItem) {
          const html = preview.innerHTML;
          const item = new ClipboardItem({
            'text/html': new Blob([html], { type: 'text/html' }),
            'text/plain': new Blob([preview.innerText], { type: 'text/plain' })
          });
          await navigator.clipboard.write([item]);
          alert('Assinatura copiada! Cole no Gmail.');
          return;
        }
      } catch(e){ console.warn('Clipboard API falhou, fallback...', e); }
      const range = document.createRange();
      range.selectNodeContents(preview);
      const sel = window.getSelection();
      sel.removeAllRanges();
      sel.addRange(range);
      try { document.execCommand('copy'); alert('Assinatura copiada! Cole no Gmail.'); }
      catch(err){ alert('Erro ao copiar. Copie manualmente.'); }
      sel.removeAllRanges();
    }

function copiarHTMLHubSpot() {
  try {
    const nome       = document.getElementById('nome')?.value || '';
    const cargo      = document.getElementById('cargo')?.value || '';
    const telefone   = document.getElementById('telefone')?.value || '';
    const linkedin   = document.getElementById('linkedin')?.value || '';
    const isWhatsapp = !!document.getElementById('whatsapp')?.checked;
    const fotoSrc    = croppedPhotoData || '';

    const html = gerarAssinaturaHTML(nome, cargo, telefone, linkedin, isWhatsapp, fotoSrc);

    if (navigator.clipboard && window.ClipboardItem) {
      const data = {
        'text/html': new Blob([html], { type: 'text/html' }),
        'text/plain': new Blob([html], { type: 'text/plain' }),
      };
      const item = new ClipboardItem(data);
      navigator.clipboard.write([item]).then(() => {
        alert('HTML copiado (HTML + texto). Pode colar no HubSpot.');
      }).catch((err) => {
        console.warn('ClipboardItem write falhou, usando fallback:', err);
        fallbackCopy(html);
      });
      return;
    }
    fallbackCopy(html);
  } catch (e) {
    console.error('Erro ao copiar HTML:', e);
    alert('N√£o foi poss√≠vel copiar. Veja o console para detalhes.');
  }

  function fallbackCopy(text) {
    const ta = document.createElement('textarea');
    ta.value = text;
    ta.setAttribute('readonly', '');
    ta.style.position = 'fixed';
    ta.style.top = '-9999px';
    document.body.appendChild(ta);
    ta.select();
    try {
      const ok = document.execCommand('copy');
      if (ok) {
        alert('HTML copiado (texto puro). Se colar no Bloco de Notas, ver√° o c√≥digo.');
      } else {
        throw new Error('execCommand retornou false');
      }
    } catch (err) {
      console.error('Fallback execCommand falhou:', err);
      alert('N√£o consegui copiar automaticamente. Selecione e copie manualmente.');
    } finally {
      document.body.removeChild(ta);
    }
  }
}

    document.getElementById('btnGerar').addEventListener('click', atualizarPreview);
    document.getElementById('btnCopiar').addEventListener('click', copiarAssinatura);
    document.getElementById('btnCopiarHTML').addEventListener('click', copiarHTMLHubSpot);


  </script>

<div style="width: 100%; max-width: 800px; margin-top: 40px; padding: 20px; background: #ffffff; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); font-family: 'Montserrat', sans-serif;">
  <h3 style="color: #2E3233;">üõ†Ô∏è Como usar sua assinatura</h3>

  <p style="margin-top: 10px;">Ap√≥s gerar e baixar sua imagem, siga o passo a passo abaixo para usar no seu e-mail:</p>

  <div style="display: flex; gap: 20px; flex-wrap: wrap; margin-top: 20px;">

    <div style="flex: 1; min-width: 240px;">
      <button onclick="toggleInstrucoes('gmail-instrucoes')" style="background-color: #F9401B; color: white; border: none; padding: 12px 20px; border-radius: 10px; cursor: pointer; font-weight: 600; width: 100%;">üì© Instru√ß√µes para Gmail</button>
    </div>

    <div style="flex: 1; min-width: 240px;">
      <button onclick="toggleInstrucoes('hubspot-instrucoes')" style="background-color: #284516; color: white; border: none; padding: 12px 20px; border-radius: 10px; cursor: pointer; font-weight: 600; width: 100%;">üìä Instru√ß√µes para HubSpot</button>
    </div>

  </div>

  <!-- Gmail Instructions -->
  <div id="gmail-instrucoes" style="display: none; margin-top: 30px;">
    <h4 style="color: #2E3233;">üì© Como adicionar no Gmail:</h4>
    <ol style="padding-left: 20px; margin-top: 10px;">
      <li>Acesse o Gmail e clique no √≠cone de engrenagem (‚öôÔ∏è);</li>
      <li>V√° em <strong>‚ÄúVer todas as configura√ß√µes‚Äù</strong>;</li>
      <li>Na aba <strong>‚ÄúGeral‚Äù</strong>, des√ßa at√© <strong>‚ÄúAssinatura‚Äù</strong>;</li>
      <li>Clique em <strong>‚ÄúCriar nova‚Äù</strong> e d√™ um nome √† assinatura;</li>
      <li>Cole os dados da assinatura criada;</li>
      <li>Em <strong>"Padr√µes de assinatura"</strong>, selecione a assinatura nos dois campos;</li>	
      <li>Role at√© o fim e clique em <strong>‚ÄúSalvar altera√ß√µes‚Äù</strong>.</li>
    </ol>
     <p>Exemplo em v√≠deo:</p>
  <video width="100%" controls>
    <source src="https://i.imgur.com/G1aBLie.mp4" type="video/mp4">
    Seu navegador n√£o suporta v√≠deo.
  </video>
  </div>

  <!-- HubSpot Instructions -->
  <div id="hubspot-instrucoes" style="display: none; margin-top: 30px;">
    <h4 style="color: #2E3233;">üìä Como adicionar no HubSpot:</h4>
    <ol style="padding-left: 20px; margin-top: 10px;">
      <li>Entre em sua conta HubSpot;</li>
      <li>No menu superior direito, clique no √≠cone de engrenagem (‚öôÔ∏è);</li>
      <li>Agora clique na aba <strong>‚ÄúE-mail‚Äù</strong>;</li>
      <li>Escolha a op√ß√£o <strong>‚ÄúGerenciar assinaturas de e-mail‚Äù</strong>;</li>
      <li>Na janela que abriu, clique na op√ß√£o <strong>HTML</strong> no canto superior direito;</li>
      <li>Cole o c√≥digo HTML que voc√™ copiou.</li>
      <li>Clique em <strong>Salvar</strong>;</li>
      <li>Ap√≥s a mensagem de confirma√ß√£o, feche a janela pop-up;</li>
    </ol>
       <p>Exemplo em v√≠deo:</p>
  <video width="100%" controls>
    <source src="https://i.imgur.com/KtEuEhM.mp4" type="video/mp4">
    Seu navegador n√£o suporta v√≠deo.
  </video>
  </div>
</div>
<script>
  function toggleInstrucoes(id) {
    const el = document.getElementById(id);
    if (el.style.display === 'block') {
      el.style.display = 'none';
    } else {
      el.style.display = 'block';
    }
  }
</script>
</body>
</html>

